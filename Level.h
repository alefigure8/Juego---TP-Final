#pragma once
#include <iostream>
#include <time.h> 
#include "SFML/Graphics.hpp"
#include "Block.h"
#include "Brick.h"
#include "Tree.h"
#include "Movable.h"
#include "Unbreakable.h"
#include "Target.h"

//#include "MilitaryBase.h"

class Level
{
private:
	static const int HEIGHT_MAP = 23;
	static const int WIDTH_MAP = 20;
	Block* _tile[HEIGHT_MAP][WIDTH_MAP];
	sf::Vector2f _grid;
	sf::Vector2i _targetIndex;
	char _map[HEIGHT_MAP][WIDTH_MAP]{
		 { '9','9','9','9','9','9','9','8','9','9','9','9','9','9','9','8','9','9','9','9' },
		 { 'W','W','W','W','W','W','W','8','W','W','W','W','W','W','W','8','W','W','W','W' },
		 { '0',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0' },
		 { '0',' ',' ',' ',' ',' ',' ','3','1','1','1','1','4',' ',' ',' ',' ',' ',' ','0' },
		 { '0',' ',' ',' ',' ',' ',' ','2','Z','Z','Z','Z','y',' ',' ',' ',' ',' ',' ','0' },
		 { '0',' ',' ',' ',' ',' ',' ','5','X','X','X','X','V',' ',' ',' ',' ',' ',' ','0' },
		 { '0',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0' },
		 { '0',' ',' ',' ',' ',' ',' ','3','1','1','1','1','4',' ','3','1','1','4',' ','0' },
		 { '0',' ',' ',' ',' ',' ',' ','2','a','c','e','g','y',' ','2','n','o','y',' ','0' },
		 { '0',' ',' ',' ',' ',' ',' ','2','b','d','f','h','y',' ','2','p','q','y',' ','0' },
		 { '0',' ','3','1','1','4',' ','2','e','g','t','v','y',' ','2','l','r','y',' ','0' },
		 { '0',' ','2','a','c','y',' ','2','f','h','u','x','y',' ','2','m','s','y',' ','0' },
		 { '0',' ','2','b','d','y',' ','5','X','X','X','X','V',' ','5','X','X','V',' ','0' },
		 { '0',' ','2','t','v','y',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0' },
		 { '0',' ','2','u','x','y',' ','3','1','1','1','1','4',' ',' ',' ',' ',' ',' ','0' },
		 { '0',' ','2','n','o','y',' ','2','Z','k','e','g','y',' ',' ',' ',' ',' ',' ','0' },
		 { '0',' ','2','p','q','y',' ','2','i','j','f','h','y',' ',' ',' ',' ',' ',' ','0' },
		 { '0',' ','5','X','X','V',' ','5','X','X','X','X','V',' ',' ',' ',' ',' ',' ','0' },
		 { '0',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0' },
		 { '0',' ',' ',' ',' ',' ',' ','<','-','-','-','>',' ',' ',' ',' ',' ',' ',' ','0' },
		 { '0',' ',' ',' ',' ',' ',' ','¡',' ',' ',' ','!',' ',' ',' ',' ',' ',' ',' ','0' },
		 { '0',' ',' ',' ',' ',' ',' ','¡',' ','$',' ','!',' ',' ',' ',' ',' ',' ',' ','0' },
		 { '6','7','7','7','7','7','8','7','7','7','7','7','7','7','8','7','7','7','7','6' },
	};

public:
	Level();
	~Level();
	
	//getter
	Block* getTile(int i, int j);
	int getHeight();
	int getWidth();
	sf::Vector2i getTargetIndex();
	
	//Methods
	void initLevel();
	void update();
	void render(sf::RenderWindow& window);
};

